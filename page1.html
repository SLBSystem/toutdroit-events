<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TOUT DROIT ‚Äî √âv√©nements</title>

  <!-- SEO basique -->
  <meta name="description" content="√âv√©nements TOUT DROIT au Havre : afterworks, brunchs, ateliers et networking pour entrepreneurs. Rejoignez-nous." />

  <!-- Perf Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Raleway:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Favicon -->
  <link rel="icon" href="https://raw.githubusercontent.com/SLBSystem/toutdroit-events/main/favicon.png" />

  <style>
    :root{
      --blue:#0074c7;      /* si tu veux coller √† ton mail: remplace par #0038FF */
      --green:#00b6a3;
      --light:#f9fafc;
      --text:#1a1a1a;
      --shadow:0 6px 20px rgba(0,0,0,.08);
    }

    *{margin:0;padding:0;box-sizing:border-box}

    body{
      font-family:'Montserrat',sans-serif;
      background:var(--light);
      color:var(--text);
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
    }

    header{
      text-align:center;
      padding:2rem 1rem 1rem;
    }

    header img{
      width:160px;height:auto;margin-bottom:.8rem;
      border-radius:10px;
      box-shadow:0 6px 15px rgba(0, 116, 199, .20), 0 2px 4px rgba(0,0,0,.08);
    }

    h1{
      font-family:'Raleway',sans-serif;
      font-size:2.3rem;
      background:linear-gradient(90deg,var(--blue),var(--green));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      font-weight:700;
      margin-bottom:.6rem;
      letter-spacing:.8px;
    }

    .intro{
      max-width:750px;text-align:center;color:#333;
      font-size:1.1rem;margin-bottom:2.5rem;padding:0 1.2rem;
      line-height:1.8;font-weight:400;
    }

    .event-list{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:1.5rem;max-width:1000px;width:100%;padding:1.5rem;
    }

    /* a.event-card pour accessibilit√© clavier + s√©mantique */
    a.event-card{
      background:#fff;border-radius:1rem;padding:1.5rem 1.2rem;
      box-shadow:var(--shadow);transition:all .3s ease;cursor:pointer;
      border-top:4px solid var(--blue);text-decoration:none;color:inherit;
      display:flex;flex-direction:column;justify-content:space-between;
      font-family:'Montserrat',sans-serif;
    }
    a.event-card:hover{transform:translateY(-6px);box-shadow:0 14px 30px rgba(0,0,0,.12)}
    a.event-card:focus{outline:none;box-shadow:0 0 0 3px rgba(0,116,199,.35), var(--shadow)}
    a.event-card h3{
      font-family:'Raleway',sans-serif;font-size:1.3rem;color:var(--blue);
      margin-bottom:.4rem;font-weight:600;
    }
    a.event-card p{font-size:.95rem;color:#555;margin-bottom:.3rem}

    .tag{
      display:inline-block;background:linear-gradient(90deg,var(--blue),var(--green));
      color:#fff;padding:.25rem .6rem;border-radius:.4rem;font-size:.75rem;
      font-weight:600;margin-bottom:.6rem;text-transform:uppercase;letter-spacing:.5px;
    }

    .event-desc{margin-top:.4rem;font-size:.9rem;color:#666;line-height:1.5}

    .cta{
      display:inline-block;background:linear-gradient(90deg,var(--blue),var(--green));
      color:#fff;text-decoration:none;padding:.6rem 1rem;border-radius:.6rem;
      margin-top:1rem;transition:all .3s;font-weight:600;font-size:.9rem;
      align-self:flex-start;box-shadow:0 4px 10px rgba(0,118,170,.25);letter-spacing:.3px;
    }
    .cta:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,118,170,.35)}

    .event-detail{
      background:#fff;border-radius:1rem;box-shadow:var(--shadow);
      max-width:800px;width:90%;margin:2rem auto;padding:2rem;
      animation:fadeIn .3s ease;font-family:'Montserrat',sans-serif;
    }
    .event-detail h2{
      font-family:'Raleway',sans-serif;color:var(--blue);margin-bottom:1rem;font-weight:600;
    }
    .meta{color:#555;margin-bottom:1.5rem;font-size:.95rem}
    .meta p{margin:.2rem 0}

    iframe{
      width:100%;
      height:clamp(420px, 70vh, 720px);
      border:none;border-radius:.8rem;margin-top:1.2rem;
    }

    .error{
      max-width:800px;margin:2rem auto;padding:1rem 1.2rem;background:#fff2f2;
      color:#991b1b;border:1px solid #fecaca;border-radius:.6rem;text-align:center;font-weight:600;
    }

    footer{
      margin-top:auto;padding:2rem 1rem;text-align:center;color:#6b7280;
      font-size:.9rem;letter-spacing:.3px;font-family:'Montserrat',sans-serif;
    }

    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
  </style>
</head>
<body>
  <header>
    <img src="https://raw.githubusercontent.com/SLBSystem/toutdroit-events/main/logo-toutdroit.png" alt="Logo TOUT DROIT" />
    <h1>√âv√©nements TOUT DROIT</h1>
    <p class="intro">
      Des moments pour r√©seauter, apprendre, partager et faire grandir votre projet. üåç<br />
      Afterworks, petits d√©j‚Äô pros, tables rondes, ateliers & soir√©es networking ‚Äî chaque rencontre est une opportunit√© de connexion et d‚Äôinspiration.
    </p>
  </header>

  <main id="content"></main>

  <footer>¬© 2025 TOUT DROIT ‚Äî Ensemble, on avance dans la m√™me direction.</footer>

  <script>
    async function loadPage(){
      const params = new URLSearchParams(window.location.search);
      const eventID = params.get("eventID");
      const content = document.getElementById("content");

      content.innerHTML = "<p class='meta' style='text-align:center;'>Chargement‚Ä¶</p>";

      try{
        const res = await fetch('./events.json'); // chemin relatif pour √©viter les 404 en sous-dossiers
        if(!res.ok) throw new Error('HTTP ' + res.status);
        const data = await res.json();

        if(!eventID){
          content.innerHTML = `
            <section class='event-list'>
              ${Object.entries(data).map(([id, e]) => `
                <a class='event-card' href='?eventID=${encodeURIComponent(id)}' aria-label="Voir l'√©v√©nement ${e.title || '√âv√©nement'}">
                  <span class='tag'>${e.type || 'R√©seautage'}</span>
                  <h3>${e.title || '√âv√©nement TOUT DROIT'}</h3>
                  <p><strong>üìÖ</strong> ${e.date || '√Ä venir'}</p>
                  <p><strong>üìç</strong> ${e.location || 'Lieu √† d√©finir'}</p>
                  <p><strong>üë•</strong> ${e.places || 'Inscriptions ouvertes'}</p>
                  <p class='event-desc'>${(e.description || 'Une rencontre conviviale entre entrepreneurs et porteurs de projets.').substring(0, 100)}...</p>
                  <span class='cta'>Je participe ‚Üí</span>
                </a>
              `).join('')}
            </section>
          `;
          return;
        }

        const e = data[eventID];
        if(!e){
          content.innerHTML = `<p class='error'>√âv√©nement introuvable üö´</p>`;
          return;
        }

        document.title = `${e.title || '√âv√©nement'} ‚Äî TOUT DROIT`;
        content.innerHTML = `
          <section class='event-detail'>
            <h2>${e.title || '√âv√©nement TOUT DROIT'}</h2>
            <div class='meta'>
              <p><strong>Date :</strong> ${e.date || '‚Äî'}</p>
              <p><strong>Lieu :</strong> ${e.location || '‚Äî'}</p>
              <p><strong>Places :</strong> ${e.places || '‚Äî'}</p>
              <p><strong>Type :</strong> ${e.type || '‚Äî'}</p>
            </div>
            <p>${e.description || ''}</p>
            ${e.tally ? `<iframe src='${e.tally}' title='Inscription' loading='lazy' referrerpolicy='no-referrer-when-downgrade'></iframe>` : ''}
          </section>
        `;
      }catch(err){
        console.error(err);
        content.innerHTML = `<p class='error'>Erreur lors du chargement des √©v√©nements.</p>`;
      }
    }

    loadPage();
  </script>
</body>
</html>
